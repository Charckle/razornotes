{% extends "peopleflow/base.html" %}

{% block extraheader %}
{% endblock %}

{% block content%}

{% macro render_field(field, placeholder=None) %}
 <div class="form-group">
     {% set css_class = 'form-control ' + kwargs.pop('class', '') %}
  
     {{ field.label }}
  
     {% if field.errors %}
         {% set css_class = css_class + ' is-invalid' %}
  
         {% for error in field.errors %}
             
             <small id="{{ field.label.text }}" class="text-danger">
                 {{ error }}
           </small>
  
         {% endfor %}
         </ul>
     {% endif %}
  
     {{ field(class=css_class, placeholder=placeholder, **kwargs) }}
 </div>
 {% endmacro %}

  <main>
  <br>
  
  <nav aria-label="breadcrumb">
	  <ol class="breadcrumb">
		<li class="breadcrumb-item"><a href="{{ url_for('peopleflow.index') }}">Home</a></li>
		<li class="breadcrumb-item"><a href="{{ url_for('peopleflow.groups') }}">Skupine</a></li>
		<li class="breadcrumb-item"><a href="{{ url_for('peopleflow.group', group_id=form.id.data) }}">{{ form.ime_skupine.data }}</a></li>
	   <li class="breadcrumb-item active" aria-current="page">Edit Skupina</li>
	  </ol>
	</nav>
	
  <div class="row g-5">  
  

      <div class="py-5 text-center">
        <img class="d-block mx-auto mb-4" src="{{ url_for('static', filename='brand/bootstrap-logo.svg') }}" alt="" width="72" height="57">
        <h2>{{ form.ime_skupine.data }}</h2>
			<span id="vari" data-value="3"></span>
        
      </div>
   </div>
    

    <form method="POST" action="{{ url_for('peopleflow.change_skupina') }}" accept-charset="UTF-8" role="form">
     {{ form.csrf_token }}
     {{ form.id }}
     {{ render_field(form.ime_skupine, placeholder="Ime skupine", autofocus="") }}
     {{ render_field(form.opis_skupine, placeholder="Opis skupine") }}
     {{ render_field(form.prikaz_s, placeholder="Enter Password") }}

     
     <div class="form-group">
    	{{ form.submit(class="form-control btn btn-primary mb-2", value="Poslji spremembe") }}
    	</div>
     </form>
     
		<!-- Button trigger modal -->
		<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">
		  Odstrani Skupino
		</button>
		     
     
     <!-- Modal -->
		<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Odstranitev človeka iz baze</h5>
		        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		      </div>
		      <div class="modal-body">
		        Ali hočeš resnično odstraniti skupino {{ form.ime_skupine.data }} iz baze?
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Prekliči</button>
		        {% if People.get_all_from(form.id.data)|length == 0 %}
			        <a type="button" class="btn btn-danger" href="{{ url_for('peopleflow.delete_skupina', skupina_id=form.id.data) }}">Odstrani Skupino: {{ People.get_all_from(form.id.data)|length  }}</a>
				  {% endif %}
		      </div>
		    </div>
		  </div>
		</div>
	
  </div>
  </main>
{% endblock %}

