{% extends "memory_module/base.html" %}

{% block extraheader %}
{% endblock %}

{% block content%}

{% set group = Grp_.get_one(g_id) %}

{% macro render_field(field, placeholder=None) %}
 <div class="form-group">
     {% set css_class = 'form-control ' + kwargs.pop('class', '') %}
  
     {{ field.label }}
  
     {% if field.errors %}
         {% set css_class = css_class + ' is-invalid' %}
  
         {% for error in field.errors %}
             
             <small id="{{ field.label.text }}" class="text-danger">
                 {{ error }}
           </small>
  
         {% endfor %}
         </ul>
     {% endif %}
  
     {{ field(class=css_class, placeholder=placeholder, **kwargs) }}
 </div>
 {% endmacro %}

  <main>
  <br>
  
  <nav aria-label="breadcrumb">
	  <ol class="breadcrumb">
		<li class="breadcrumb-item"><a href="{{ url_for('memory_module.index') }}">Home</a></li>
    <li class="breadcrumb-item"><a href="{{ url_for('memory_module.group_view', g_id=g_id) }}">Group - {{ group['name'] }}</a></li>
	   <li class="breadcrumb-item active" aria-current="page">New Memory Item</li>
	  </ol>
	</nav>
	
  <div class="row g-5">  
  

      <div class="py-5 text-center">
        <img class="d-block mx-auto mb-4" src="{{ url_for('static', filename='brand/bootstrap-logo.svg') }}" alt="" width="72" height="57">
        <h2>New Item</h2>
			<span id="vari" data-value="3"></span>
        
      </div>
   </div>
    

    <form method="POST" action="{{ url_for('memory_module.m_item_new') }}" accept-charset="UTF-8" role="form">
     {{ form.csrf_token }}
     <input type="hidden" id="id" name="id" value="999">
     {{ render_field(form.answer, autofocus="") }}
     {{ render_field(form.question) }}
     {{ render_field(form.comment_) }}
     <input type="hidden" id="m_group_id" name="m_group_id" value="{{g_id}}">
     
     <div class="form-group">
         {{ form.has_birthday }} - {{ form.has_birthday.label.text }}
     </div>
     
     <div class="form-group" id="birthday-field-group" style="display: none;">
         {{ form.birthday.label }}
         {% if form.birthday.errors %}
             {% for error in form.birthday.errors %}
                 <small class="text-danger">{{ error }}</small>
             {% endfor %}
         {% endif %}
         {{ form.birthday(class="form-control", type="date") }}
     </div>

     
     <div class="form-group">
    	{{ form.submit(class="form-control btn btn-primary mb-2") }}
    	</div>
     </form>
	

	
  </div>
  </main>
  
  <script>
  function toggleBirthdayField() {
      var checkbox = document.querySelector('input[name="has_birthday"]');
      var birthdayGroup = document.getElementById('birthday-field-group');
      if (checkbox && checkbox.checked) {
          birthdayGroup.style.display = 'block';
      } else {
          birthdayGroup.style.display = 'none';
      }
  }
  // Add event listener on page load
  document.addEventListener('DOMContentLoaded', function() {
      var checkbox = document.querySelector('input[name="has_birthday"]');
      if (checkbox) {
          checkbox.addEventListener('change', toggleBirthdayField);
      }
  });
  </script>
{% endblock %}

